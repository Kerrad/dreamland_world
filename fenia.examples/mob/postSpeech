.get_mob_index(@vnum@).@trig@ = function(mob, ch, speech) {
    // Вызывается в следующий пульс после того, как персонаж ch произнес рядом реплику speech.
    // Вызывается из потока, поэтому можно добавлять произвольные задержки в код этого триггера.

    // Игнорируем реплики мобов.
    if (ch.is_npc())
        return;

    // Можно реагировать абсолютно на всё, что не является ожидаемой репликой,
    // но вообще говоря это не рекомендуется - рядом с мобом могут просто общаться.
    // Обратите внимание на вызов toLower (наши регулярные выражения, к сожалению, чувствительны к русскому регистру).
    if (!speech.toLower().match("keeper|хранитель")) {
        mob.interpret("emote раздраженно морщится.");
        mob.interpret("say Не понимаю. Вы из службы доставки? Как зовут вашего клиента?"); 
        return;
    }   

    // Если желаемый предмет уже есть у персонажа, настучать по башке.
    if (ch.get_obj_carry_vnum(90) != null) {
        mob.interpret("bonk " + ch.name);
        return;
    }

    // Создать новый предмет и дать персонажу.
    var dress;

    dress = .get_obj_index(90).create();
    dress.timer = 60 * 6;
    dress.obj_to_char(ch);

    mob.interpret("say Ну наконец-то!");
}

